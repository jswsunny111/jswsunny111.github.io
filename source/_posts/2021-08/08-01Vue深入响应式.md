---
title: Vue.set()
date: 2021-08-01 21:27:28
tags: Vue
category: Vue
---

### 应用场景

由于 JavaScript 的限制，Vue 不能检测数组和对象的变化。尽管如此我们还是有一些办法来回避这些限制并保证它们的响应性。
首先 Vue 中已经封装了一些数组的封装方法 例如：push() pop() shift() unshift() splice() sort() reverse() 这些事 都可以处理一些响应式数据。
但一些无法检测到 property()
[Vue.set()](https://cn.vuejs.org/v2/api/#Vue-set) Api 可以解决这一现象

#### 使用方式

`Vue.set( target, key, value )`

-   target Arr||Obj (修改的对象)
-   key/index string || number（修改的具体数据 key 值。）
-   value : any（要修改的结果）

### 代码

```
<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<div id="app2">
    <p v-for="(item,index) in items" :key="index">
        {{item.message}}
    </p>
    <button class="btn" @click="btn2Click()">动态赋值</button><br/>
    <button class="btn" @click="btn3Click()">为data新增属性</button>
</div>
<script src="../dist/vue.min.js"></script>
<script>
var vm = new Vue({
    el:"#app",
    data:{
        items:[
            {message:"Test one",id:"1"},
            {message:"Test two",id:"2"},
            {message:"Test three",id:"3"}
        ]
    },
    methods:{
        btn2Click(){
            Vue.set(this.items,0,{message:"Change Test",id:this.items.length + 1})
        },
        btn3Click(){
            var itemLen=this.items.length;
            Vue.set(this.items,itemLen,{message:"Test add attr",id:itemLen});
        }
    }
});
</script>
</body>
</html>
```

有时想向已有对象上添加一些属性，例如使用 Object.assign() 或 \_.extend() 方法来添加属性。但是，添加到对象上的新属性不会触发更新。在这种情况下可以创建一个新的对象，让它包含原对象的属性和新的属性.

```
// 代替 Object.assign(this.obj, { a: 1, b: 2 })
this.obj= Object.assign({}, this.obj, { a: 1, b: 2 })
```

### set 源码

![BG图片](/img/1.jpg)
